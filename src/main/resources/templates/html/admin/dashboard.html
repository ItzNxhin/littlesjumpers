<!-- dashboard.html completo modificado -->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Admisiones - MiColegio</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/gestion-usuarios.css}">
</head>
<body>
    <header>
        <a href="#" class="logo">MiColegio - Admisiones</a>
        <div class="nav-buttons">
            <span class="user-info" id="userInfo">Bienvenido, Admin</span>
            <button class="btn" id="btnCerrarSesion">Cerrar Sesi√≥n</button>
        </div>
    </header>

    <main class="dashboard-container">
        <aside class="sidebar">
            <h3>Men√∫ Principal</h3>
            <nav class="menu">
                <a href="#" class="menu-item" data-section="gestion-usuarios">
                    <span class="icon">üë•</span>
                    <span>Gesti√≥n de Usuarios</span>
                </a>
                <a href="#" class="menu-item" data-section="gestion-aspirantes">
                    <span class="icon">üë®‚Äçüéì</span>
                    <span>Gesti√≥n de Aspirantes</span>
                </a>
                <a href="#" class="menu-item active" data-section="entrevistas">
                    <span class="icon">üó£Ô∏è</span>
                    <span>Gesti√≥n de Entrevistas</span>
                </a>
            </nav>
        </aside>

        <section class="content">

            <!-- Gesti√≥n de Usuarios -->
            <div id="gestion-usuarios" class="section">
                <h2>Gesti√≥n de Usuarios</h2>

                <!-- Tabs superiores -->
                <div class="tabs-container-inline">
                    <button class="tab-btn-inline active" data-tab="estudiantes">Estudiantes</button>
                    <button class="tab-btn-inline" data-tab="profesores">Profesores</button>
                    <button class="tab-btn-inline" data-tab="acudientes">Acudientes</button>
                </div>

                <!-- Tab Estudiantes -->
                <div id="tab-estudiantes-inline" class="tab-content-inline active">
                    <div class="estudiantes-layout-inline">
                        <div class="grupos-sidebar-inline">
                            <div class="grupos-header">
                                <h3>Grupos</h3>
                                <button class="btn-crear-grupo" onclick="gestionUsuarios.crearGrupo()">+ Crear</button>
                            </div>
                            <div class="grupos-list" id="gruposList">
                                <!-- Los grupos se cargan din√°micamente -->
                            </div>
                        </div>
                        <div class="contenido-principal-inline">
                            <div class="acciones-header">
                                <h3 id="grupoSeleccionadoNombre">Selecciona un grupo</h3>
                                <div class="acciones-buttons">
                                    <button class="btn-accion btn-consultar" id="btnConsultarEstudiante" disabled onclick="gestionUsuarios.consultarEstudiante()">
                                        üìã Consultar
                                    </button>
                                    <button class="btn-accion btn-modificar" id="btnModificarEstudiante" disabled onclick="gestionUsuarios.modificarEstudiante()">
                                        ‚úèÔ∏è Modificar
                                    </button>
                                    <button class="btn-accion btn-cambiar-estado" id="btnCambiarEstado" disabled onclick="gestionUsuarios.cambiarEstadoEstudiante()">
                                        üîÑ Cambiar Estado
                                    </button>
                                    <button class="btn-accion btn-descargar" id="btnDescargarLista" disabled onclick="gestionUsuarios.descargarLista()">
                                        üì• Descargar Lista
                                    </button>
                                </div>
                            </div>
                            <div class="usuarios-list" id="estudiantesList">
                                <div class="empty-state-inline">
                                    <div class="empty-state-icon">üë•</div>
                                    <div class="empty-state-text">Selecciona un grupo para ver los estudiantes</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Profesores -->
                <div id="tab-profesores-inline" class="tab-content-inline">
                    <div class="contenido-principal-inline" style="padding-top: 0;">
                        <div class="acciones-header">
                            <h3>Profesores</h3>
                            <div class="acciones-buttons">
                                <button class="btn-accion btn-crear" onclick="gestionUsuarios.crearProfesor()">
                                    ‚ûï Crear Cuenta
                                </button>
                                <button class="btn-accion btn-consultar" id="btnConsultarProfesor" disabled onclick="gestionUsuarios.consultarProfesor()">
                                    üìã Consultar
                                </button>
                                <button class="btn-accion btn-modificar" id="btnModificarProfesor" disabled onclick="gestionUsuarios.modificarProfesor()">
                                    ‚úèÔ∏è Modificar
                                </button>
                                <button class="btn-accion btn-cambiar-estado" id="btnAsignarCuentaProfesor" disabled onclick="gestionUsuarios.asignarCuenta('profesor')">
                                    üîë Asignar Cuenta
                                </button>
                            </div>
                        </div>
                        <div class="usuarios-list" id="profesoresList">
                            <!-- Los profesores se cargan din√°micamente -->
                        </div>
                    </div>
                </div>

                <!-- Tab Acudientes -->
                <div id="tab-acudientes-inline" class="tab-content-inline">
                    <div class="contenido-principal-inline" style="padding-top: 0;">
                        <div class="acciones-header">
                            <h3>Acudientes</h3>
                            <div class="acciones-buttons">
                                <button class="btn-accion btn-crear" onclick="gestionUsuarios.crearAcudiente()">
                                    ‚ûï Crear Cuenta
                                </button>
                                <button class="btn-accion btn-consultar" id="btnConsultarAcudiente" disabled onclick="gestionUsuarios.consultarAcudiente()">
                                    üìã Consultar
                                </button>
                                <button class="btn-accion btn-modificar" id="btnModificarAcudiente" disabled onclick="gestionUsuarios.modificarAcudiente()">
                                    ‚úèÔ∏è Modificar
                                </button>
                                <button class="btn-accion btn-cambiar-estado" id="btnAsignarCuentaAcudiente" disabled onclick="gestionUsuarios.asignarCuenta('acudiente')">
                                    üîë Asignar Cuenta
                                </button>
                            </div>
                        </div>
                        <div class="usuarios-list" id="acudientesList">
                            <!-- Los acudientes se cargan din√°micamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gesti√≥n de Aspirantes (placeholder por ahora) -->
            <div id="gestion-aspirantes" class="section">
                <h2>Gesti√≥n de Aspirantes</h2>
                <p class="section-description">Administraci√≥n completa de estudiantes aspirantes (registro, edici√≥n, etc).</p>
                <div class="empty-state-card">
                    <div class="card-icon">üöß</div>
                    <h3>Secci√≥n en desarrollo</h3>
                    <p>Pronto disponible...</p>
                </div>
            </div>
        

            <!-- Gesti√≥n de Entrevistas -->
            <div id="entrevistas" class="section active">
                <h2>Gesti√≥n de Entrevistas</h2>
                <p class="section-description">Control del proceso de admisi√≥n y entrevistas de estudiantes aspirantes.</p>
                <div class="actions-bar">
                    <button class="btn btn-primary" onclick="loadEntrevistas()">üîÑ Actualizar Lista</button>
                </div>

                <div class="table-container">
                    <table class="data-table" id="entrevistasTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tarjeta Identidad</th>
                                <th>Nombre Completo</th>
                                <th>Fecha Nacimiento</th>
                                <th>Grado Aplicado</th>
                                <th>Estado</th>
                                <th>Fecha Solicitud</th>
                                <th>Fecha Entrevista</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Se llena con JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

        </section>
    </main>

    <!-- Modal Programar Entrevista -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h3>Programar Entrevista</h3>
            <p>Seleccione fecha y hora:</p>
            <input type="datetime-local" id="fechaEntrevistaInput">
            <div class="actions-bar" style="justify-content: flex-end; margin-top: 20px;">
                <button class="btn btn-cancelar" id="cancelarModal">Cancelar</button>
                <button class="btn btn-primary" id="confirmarModal">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal Consultar Usuario -->
    <div id="modalConsultar" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="modalConsultarTitulo">Detalles del Usuario</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalConsultar()">&times;</button>
            </div>
            <div class="modal-body" id="modalConsultarBody">
                <!-- Se llena din√°micamente -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalConsultar()">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal Modificar Usuario -->
    <div id="modalModificar" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="modalModificarTitulo">Modificar Usuario</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalModificar()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formModificar">
                    <!-- Se llena din√°micamente -->
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalModificar()">Cancelar</button>
                <button class="btn btn-primary" onclick="gestionUsuarios.guardarModificacion()">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- Modal Crear Grupo -->
    <div id="modalCrearGrupo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Crear Nuevo Grupo</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalCrearGrupo()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formCrearGrupo">
                    <div class="form-group">
                        <label for="grupoGrado">Grado *</label>
                        <select id="grupoGrado" class="form-control" required>
                            <option value="">Seleccione...</option>
                            <option value="parvulos">P√°rvulos</option>
                            <option value="caminadores">Caminadores</option>
                            <option value="pre_jardin">Pre-jard√≠n</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="grupoIdentificador">Identificador *</label>
                        <input type="text" id="grupoIdentificador" class="form-control" placeholder="Ej: Grupo A" required>
                    </div>
                    <div class="form-group">
                        <label for="grupoProfesor">Profesor Asignado</label>
                        <select id="grupoProfesor" class="form-control">
                            <option value="">Sin profesor asignado</option>
                            <!-- Se llena din√°micamente -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="grupoCapacidad">Capacidad *</label>
                        <input type="number" id="grupoCapacidad" class="form-control" min="1" placeholder="Ej: 20" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalCrearGrupo()">Cancelar</button>
                <button class="btn btn-primary" onclick="gestionUsuarios.guardarGrupo()">Crear Grupo</button>
            </div>
        </div>
    </div>

    <!-- Modal Crear Cuenta -->
    <div id="modalCrearCuenta" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="modalCrearCuentaTitulo">Crear Cuenta</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalCrearCuenta()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formCrearCuenta">
                    <!-- Se llena din√°micamente seg√∫n el tipo de usuario -->
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalCrearCuenta()">Cancelar</button>
                <button class="btn btn-primary" onclick="gestionUsuarios.guardarCuenta()">Crear Cuenta</button>
            </div>
        </div>
    </div>

    <!-- Modal Cambiar Estado -->
    <div id="modalCambiarEstado" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Cambiar Estado del Estudiante</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalCambiarEstado()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="estudianteNombreEstado"></p>
                <div class="form-group">
                    <label for="nuevoEstado">Nuevo Estado *</label>
                    <select id="nuevoEstado" class="form-control" required>
                        <option value="">Seleccione...</option>
                        <option value="aspirante">Aspirante</option>
                        <option value="aceptado">Aceptado</option>
                        <option value="rechazado">Rechazado</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalCambiarEstado()">Cancelar</button>
                <button class="btn btn-primary" onclick="gestionUsuarios.guardarCambioEstado()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal Asignar Cuenta -->
    <div id="modalAsignarCuenta" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Asignar Cuenta de Acceso</h3>
                <button class="btn-close-modal" onclick="gestionUsuarios.cerrarModalAsignarCuenta()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="usuarioNombreAsignar"></p>
                <div class="form-group">
                    <label for="cuentaExistente">Cuenta Existente</label>
                    <select id="cuentaExistente" class="form-control">
                        <option value="">Seleccione una cuenta...</option>
                        <!-- Se llena din√°micamente -->
                    </select>
                </div>
                <hr style="margin: 20px 0; border: 1px solid #e0e0e0;">
                <h5 style="margin-bottom: 15px; color: #666;">O crear nueva cuenta:</h5>
                <div class="form-row">
                    <div class="form-group">
                        <label for="nuevaCuentaUsername">Nuevo Usuario</label>
                        <input type="text" id="nuevaCuentaUsername" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="nuevaCuentaPassword">Nueva Contrase√±a</label>
                        <input type="password" id="nuevaCuentaPassword" class="form-control">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="gestionUsuarios.cerrarModalAsignarCuenta()">Cancelar</button>
                <button class="btn btn-primary" onclick="gestionUsuarios.guardarAsignacionCuenta()">Asignar</button>
            </div>
        </div>
    </div>

    <script th:src="@{/js/gestion-usuarios.js}"></script>
    <script th:src="@{/js/dashboard.js}"></script>
</body>
</html>